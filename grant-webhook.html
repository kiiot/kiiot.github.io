<!DOCTYPE html><html><head><title>IIOT WiFi Grant Webhook</title><meta charset='utf-8'><link href='https://dn-maxiang.qbox.me/res-min/themes/marxico.css' rel='stylesheet'><style></style></head><body><div id='preview-contents' class='note-content'>
                        
                    



<h1 id="iiot-wifi-grant-webhook">IIOT WiFi Grant Webhook</h1>

<p><strong>設定方式</strong></p>

<p>於<strong>IIOT Admin</strong>後台編輯<strong><em>行銷活動</em></strong>，選取<strong><em>允許上網模組</em></strong>，點開<strong><em>進階模式</em></strong>設定Webhook</p>

<p>將會於用戶被允許上網時，收到如下的資料格式：</p>

<ul><li>businessId: 您的企業ID</li>
<li>secret: 您設定的webhook密碼</li>
<li>events: 此事件為<code>wifi-grant</code></li>
<li>data: Webhook所帶的資料，包括<code>network</code>,<code>visitor</code>,<code>activity</code>,<code>business</code> <br>
<ul>
<li>network: 提供<code>iNodeId</code>(允許用戶上線的設備ID)以及<code>clientMac</code>(用戶設備的MAC Address)</li>
<li>visitor: 用戶登入的帳戶資訊</li>
<li>activity: 活動ID與名稱</li>
<li>business: 企業ID與名稱</li></ul></li>
</ul>

<pre class="prettyprint hljs-dark"><code class="hljs json">{<br>    "<span class="hljs-attribute">businessId</span>": <span class="hljs-value"><span class="hljs-string">"YOUR_BUSINESSID"</span></span>,<br>    "<span class="hljs-attribute">secret</span>": <span class="hljs-value"><span class="hljs-string">"YOUR_SETTING_SECRET"</span></span>,<br>    "<span class="hljs-attribute">events</span>": <span class="hljs-value"><span class="hljs-string">"wifi-grant"</span></span>,<br>    "<span class="hljs-attribute">data</span>": <span class="hljs-value">{<br>        "<span class="hljs-attribute">network</span>": <span class="hljs-value">{<br>            "<span class="hljs-attribute">iNodeId</span>": <span class="hljs-value"><span class="hljs-string">"INODE_CUID_STRING"</span></span>,<br>            "<span class="hljs-attribute">clientMac</span>": <span class="hljs-value"><span class="hljs-string">"aa:bb:cc:dd:ee:ff"</span><br>        </span>}</span>,<br>        "<span class="hljs-attribute">visitor</span>": <span class="hljs-value">{<br>            "<span class="hljs-attribute">vuid</span>": <span class="hljs-value"><span class="hljs-string">"VISITOR_ID"</span></span>,<br>            "<span class="hljs-attribute">lastAuth</span>": <span class="hljs-value"><span class="hljs-number">1489595011572</span></span>,<br>            "<span class="hljs-attribute">phoneNumber</span>": <span class="hljs-value"><span class="hljs-string">"+886900000000"</span></span>,<br>            "<span class="hljs-attribute">authProvider</span>": <span class="hljs-value"><span class="hljs-string">"iiot"</span><br>        </span>}</span>,<br>        "<span class="hljs-attribute">activity</span>": <span class="hljs-value">{<br>            "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"ACTIVITY_ID"</span></span>,<br>            "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"My Activity"</span><br>        </span>}</span>,<br>        "<span class="hljs-attribute">business</span>": <span class="hljs-value">{<br>            "<span class="hljs-attribute">id</span>": <span class="hljs-value"><span class="hljs-string">"BUSINESS_ID"</span></span>,<br>            "<span class="hljs-attribute">name</span>": <span class="hljs-value"><span class="hljs-string">"My Business Name"</span><br>        </span>}<br>    </span>}</span>,<br>    "<span class="hljs-attribute">ts</span>": <span class="hljs-value"><span class="hljs-number">1489595012146</span><br></span>}<br></code></pre></div></body></html>